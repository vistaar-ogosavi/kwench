{%- layout none -%}{%- include 'LS_5906464808_global' -%}{%- if shop.metafields.langshop['searchArticles'] == "1" -%}{%- assign LS_search_terms = search.terms | downcase | replace: '&amp;', '&' | replace: '&quot;', '"' | replace: "&#39;", "'" -%}{%- capture LS_title_meta_key -%}{{ LS_5906464808_lang }}_title{%- endcapture -%}{%- capture LS_description_meta_key -%}{{ LS_5906464808_lang }}_body_html{%- endcapture -%}{%- capture LS_excerpt_meta_key -%}{{ LS_5906464808_lang }}_summary_html{%- endcapture -%}{%- assign LS_blog_handle = cart.attributes['LS_searching_blog_state'] -%}{%- assign LS_result_count = 0 -%}{%- if LS_blog_handle -%} { "status": "enabled", "items": [ {%- comment -%} Articles search {%- endcomment -%}{%- paginate blogs[LS_blog_handle].articles by 10000 -%}{%- for search_article in blogs[LS_blog_handle].articles -%}{%- if search_article.metafields.langshop[LS_title_meta_key] -%}{%- assign loop_search_article_title = search_article.metafields.langshop[LS_title_meta_key] | downcase | strip_html -%}{%- else -%}{%- assign loop_search_article_title = search_article.title | downcase | strip_html -%}{%- endif -%}{%- if search_article.metafields.langshop[LS_description_meta_key] -%}{%- assign loop_search_article_description = search_article.metafields.langshop[LS_description_meta_key] | downcase | strip_html -%}{%- else -%}{%- assign loop_search_article_description = search_article.content | downcase | strip_html -%}{%- endif -%}{%- if search_article.metafields.langshop[LS_excerpt_meta_key] -%}{%- assign loop_search_article_excerpt = search_article.metafields.langshop[LS_excerpt_meta_key] | downcase | strip_html -%}{%- else -%}{%- assign loop_search_article_excerpt = search_article.excerpt -%}{%- endif -%}{%- if loop_search_article_excerpt contains LS_search_terms or loop_search_article_description contains LS_search_terms or loop_search_article_title contains LS_search_terms -%}{%- if LS_result_count > 0 -%},{%- endif -%} { "item": {{ search_article | json }}, "title": {{ loop_search_article_title | strip_newlines | json }}, "description": {{ loop_search_article_description | strip_newlines | json }}, "excerpt": {{ loop_search_article_excerpt | strip_newlines | json }}, "blog": {{ LS_blog_handle | json }} } {%- assign LS_result_count = LS_result_count | plus: 1 -%}{%- endif -%}{%- endfor -%}{%- endpaginate -%} ] } {%- else -%} { "status": "disabled" } {%- endif -%}{%- else -%} { "status": "disabled" }{%- endif -%}