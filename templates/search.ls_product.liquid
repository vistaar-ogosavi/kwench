{%- layout none -%}{%- include 'LS_5906464808_global' -%}{%- assign handle = search.terms -%}{%- assign product = all_products[handle] -%}{%- if product != blank -%} { "status": true, "product": { "id": {{ product.id | json }}, "title": {%- include 'LS_5906464808_title', item: product -%}{{ LS_5906464808_item_title | json }}, "description": {%- include 'LS_5906464808_description', item: product -%}{{ LS_5906464808_item_desc | json }}, "variants": [ {%- for variant in product.variants -%} { "id": {{ variant.id | json }}, "options": [ {%- for i in (1..3) -%}{%- assign optionKey = 'option' | append: i -%}{%- assign nextIndex = i | plus: 1 -%}{%- assign optionKeyNext = 'option' | append: nextIndex -%}{%- if variant[optionKey] -%}{%- capture LS_option_key -%}{{ LS_5906464808_lang }}_variant_{{optionKey}}{%- endcapture -%}{%- if variant.metafields.langshop[LS_option_key] -%} {{ variant.metafields.langshop[LS_option_key] | json }} {%- else -%} {{ variant[optionKey] | json }} {%- endif -%}{%- if variant[optionKeyNext] -%},{%- endif -%}{%- endif -%}{%- endfor -%} ] }{%- if forloop.last == false -%},{%- endif -%}{%- endfor -%} ] } }{%- else -%} { "status": false }{%- endif -%} 