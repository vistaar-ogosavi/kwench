{% layout none %}{% assign ls_default_lang = shop.metafields.langshop['lang_default'] %}{% assign ls_langs_meta = shop.metafields.langshop["lang_list"] %}{% assign ls_lags_str = "" %}{% if ls_langs_meta != blank and ls_default_lang != blank %}{% assign ls_split = ls_langs_meta | split: '"lang_id":"' %}{% for lang_str in ls_split offset:1 %}{% assign ls_lang = lang_str | split: '","lang_title"' | first %}{% if ls_lang != ls_default_lang %}{% assign ls_lags_str = ls_lags_str | append: "," | append: ls_lang %}{% endif %}{% endfor %}{% assign ls_lags = ls_lags_str | remove_first: "," | split: "," %}{% endif %}{% assign blogs_handles = search.terms | split: "," %}{ "blogs": [ {% if search.terms != blank %}{% capture blogs_json %}{%- for handle in blogs_handles -%}{% if blogs[handle].title != blank %} ,{ "id" : {{ blogs[handle].id }}, "translations"	: { {% for lang in ls_lags %} "{{ lang }}": { {% capture key_meta_title %}{{lang}}_title{% endcapture %}{% assign title = blogs[handle].metafields.langshop[key_meta_title] | strip %} "title": {% if title != blank %}true{% else %}false{% endif %} }{% if forloop.last == false %},{% endif %}{% endfor %} } } {% endif %}{%- endfor -%}{% endcapture %}{% assign blogs_json = blogs_json | remove_first: "," %} {{ blogs_json }} {% endif %}] }