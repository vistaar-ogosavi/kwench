{% layout none %}{% assign ls_default_lang = shop.metafields.langshop['lang_default'] %}{% assign ls_langs_meta = shop.metafields.langshop["lang_list"] %}{% assign ls_lags_str = "" %}{% if ls_langs_meta != blank and ls_default_lang != blank %}{% assign ls_split = ls_langs_meta | split: '"lang_id":"' %}{% for lang_str in ls_split offset:1 %}{% assign ls_lang = lang_str | split: '","lang_title"' | first %}{% if ls_lang != ls_default_lang %}{% assign ls_lags_str = ls_lags_str | append: "," | append: ls_lang %}{% endif %}{% endfor %}{% assign ls_lags = ls_lags_str | remove_first: "," | split: "," %}{% endif %}{ "collections": [ {%- paginate collections by 1000 -%}{%- for collection in collections -%} { "id" : {{ collection.id }}, {% if search.terms contains 'with-data' %} "data": {{ collection | json }}, {% endif %} "translations"	: { {% for lang in ls_lags %} "{{ lang }}": { {% capture key_meta_title %}{{lang}}_title{% endcapture %}{% assign title = collection.metafields.langshop[key_meta_title] | strip %} "title": {% if title != blank %}true{% else %}false{% endif %}, {% capture key_meta_content %}{{lang}}_body_html{% endcapture %}{% assign content = collection.metafields.langshop[key_meta_content] | strip %} "content": {% if collection.description != blank and content == blank %}false{% else %}true{% endif %} }{% if forloop.last == false %},{% endif %}{% endfor %} } }{% if forloop.last == false %},{% endif %}{%- endfor -%}{%- endpaginate -%}] }