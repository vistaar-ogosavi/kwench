{% include 'LS_5906464808_global' %}{% assign load_menu_id = LS_menu_id | plus: 0 %}{% if LS_5906464808_lang == LS_5906464808_default_lang %}{% assign ls_menu_prefix = "" %}{% else %}{% capture ls_menu_prefix %}{{ LS_5906464808_lang }}_{% endcapture %}{% endif %}{% if load_menu_id > 0 %}{% capture LS_5906464808_menus %}{% include 'LS_5906464808_navigation_json' %}{% endcapture %}{% capture lsindex%}{% increment lsrandomizer %}{% endcapture %} <div class="ls-nav-menu" id="ls-nav-menu-{{ load_menu_id }}-{{ lsindex }}"></div> <script type="text/javascript"> var ls_menu_content = ""; var ls_menu_index = '{{ lsindex }}'; var ls_menu_id = '{{ load_menu_id }}'; var ls_menu_prefix = '{{ ls_menu_prefix }}'; var ls_language_menus = JSON.parse( {{ LS_5906464808_menus | json }} ); var ls_menu_div = document.getElementById("ls-nav-menu-" + ls_menu_id + "-" + ls_menu_index ); var ls_customer_logined = {% if shop.customer_accounts_enabled and customer %}true{% else %}false{% endif %}; if( ls_language_menus != null && ls_menu_id in ls_language_menus ) { if(ls_language_menus[ls_menu_id]['title']['options']['options_disableTitle'] != "1") { ls_menu_content += "<h3 class='ls-nav-title'>" + LS_get_value(ls_language_menus[ls_menu_id]['title']['title'], 'title') + "</h3>" } ls_menu_content += LS_ul_li_render(ls_language_menus[ls_menu_id]['list'], true); } else { ls_menu_content += 'Menu not found'; } ls_menu_div.innerHTML = ls_menu_content; function LS_ul_li_render(json_obj, first) { var main_ul_class = ls_language_menus[ls_menu_id]['title']['options']['options_class'].replace(/'/g, '\"'); var main_id = ls_language_menus[ls_menu_id]['title']['options']['options_id'].replace(/'/g, '\"'); var main_ul_styles = ls_language_menus[ls_menu_id]['title']['options']['options_styles'].replace(/'/g, '\"'); var child_ul_class = ( "options_child_class" in ls_language_menus[ls_menu_id]['title']['options'] ) ? ls_language_menus[ls_menu_id]['title']['options']['options_child_class'].replace(/'/g, '\"') : ""; var child_ul_html_before = ( "options_child_html_before" in ls_language_menus[ls_menu_id]['title']['options'] ) ? ls_language_menus[ls_menu_id]['title']['options']['options_child_html_before'] : ""; var child_ul_html_after = ( "options_child_html_after" in ls_language_menus[ls_menu_id]['title']['options'] ) ? ls_language_menus[ls_menu_id]['title']['options']['options_child_html_after'] : ""; var ul_li_content = (first == true) ? "<ul class='" + main_ul_class + "' id='" + main_id + "' style='" + main_ul_styles + "'>" : child_ul_html_before + "<ul class='" + child_ul_class + "'>"; json_obj.forEach(function(element,item){ var ls_li_href = LS_get_value(json_obj[item], 'menuItemUrl'); var ls_li_class = ( window.location.pathname == ls_li_href ) ? json_obj[item]['menuItemClass'] + " active" : json_obj[item]['menuItemClass']; var ls_a_class = ( "menuAClass" in json_obj[item] ) ? json_obj[item]['menuAClass'] : ""; var ls_visibility = ( "menuItemVisibility" in json_obj[item] ) ? json_obj[item]['menuItemVisibility'] : "any"; if( ls_visibility == "any" || ( ls_customer_logined && ls_visibility == "logined" ) || ( ! ls_customer_logined && ls_visibility == "notlogined" ) ) { ul_li_content += "<li class='" + ls_li_class + "' title='" + LS_get_value(json_obj[item], 'titleAttr') + "'>"; var beforeHtml = ( "menuBeforeHtml" in json_obj[item] ) ? json_obj[item]['menuBeforeHtml'] : ""; var afterHtml = ( "menuAfterHtml" in json_obj[item] ) ? json_obj[item]['menuAfterHtml'] : ""; var beforeLinkHtml = ( "linkBeforeHtml" in json_obj[item] ) ? json_obj[item]['linkBeforeHtml'] : ""; var afterLinkHtml = ( "linkAfterHtml" in json_obj[item] ) ? json_obj[item]['linkAfterHtml'] : ""; if(typeof(json_obj[item].children) === 'object'){ ul_li_content += beforeLinkHtml + "<a class='" + ls_a_class + "' href='" + ls_li_href + "'>" + beforeHtml + LS_get_value(json_obj[item], 'title') + afterHtml + "</a>" + afterLinkHtml; ul_li_content += LS_ul_li_render(json_obj[item].children); } else { ul_li_content += beforeLinkHtml + "<a class='" + ls_a_class + "' href='" + ls_li_href + "'>" + beforeHtml + LS_get_value(json_obj[item], 'title') + afterHtml + "</a>" + afterLinkHtml; } ul_li_content += "</li>"; } }); ul_li_content += "</ul>" + child_ul_html_after; return ul_li_content; } function LS_get_value(json_item, value_key) { var json_key = ls_menu_prefix + value_key; if( json_key in json_item ) { return ( json_item[json_key] != "" ) ? json_item[json_key] : json_item[value_key]; } return ( value_key in json_item ) ? json_item[value_key] : ""; } </script> {% else %} Menu ID must be Numeric{% endif %}